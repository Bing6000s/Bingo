import { getApps as n, initializeApp as i, cert as a } from "firebase-admin/app";
import { getFirestore as p } from "firebase-admin/firestore";
import { backupService as c, backupFromDocService as l, getAllCollectionsService as f } from "./export.js";
import { restoreService as m } from "./import.js";
const k = (e, t = "[DEFAULT]", r = {}) => {
  const o = n();
  if (o.length === 0 || o.length > 0 && o[0].name !== t) {
    let s;
    e ? s = i(
      {
        credential: a(e),
        databaseURL: e.databaseURL
      },
      t
    ) : s = i(void 0, t), p(s).settings({
      timestampsInSnapshots: !0,
      ...r.firestore
    });
  } else
    console.warn("Firebase App exist. Return default firestore instance");
  return p(o[0]);
}, S = (e, t, r) => c(e, t, r), A = (e, t, r, o) => l(e, t, r, o), h = (e, t, r = {}) => m(e, t, r), v = (e, t = [], r) => f(e, t, r);
export {
  S as backup,
  A as backupFromDoc,
  v as backups,
  k as initializeFirebaseApp,
  h as restore
};
